---
title: 'Running Spring Boot application with Docker.'
date: '2024-03-21'
lastmod: '2024-03-21'
tags: ['spring boot', 'docker', 'docker compose']
draft: false
summary: Docker simplifies and accelerates your workflows by letting you freely innovate with your choice of tools, application stacks, and deployment environments for each project. You can run your Spring Boot artifact directly within Docker containers. This is useful when you need to quickly create microservices. Letâ€™s see this process in action.
images: ['/static/img/prompts/structured-blocks-cover.png']
layout: PostLayout
---

<TOCInline toc={props.toc} asDisclosure toHeading={3} />

## 1. ChÃºng ta sáº½ lÃ m gÃ¬?

- 1. Äáº§u tiÃªn, chÃºng ta sáº½ táº¡o má»™t á»©ng dá»¥ng Spring Boot Ä‘Æ¡n giáº£n khÃ´ng sá»­ dá»¥ng Docker.
- 2. Sau Ä‘Ã³ sá»­ dá»¥ng Dockerfile Ä‘á»ƒ build má»™t Docker image cho á»©ng dá»¥ng Spring Boot vá»«a táº¡o vÃ  cháº¡y á»©ng dá»¥ng qua Docker container vá»›i image vá»«a build.
- 3. Cuá»‘i cÃ¹ng lÃ  há»c cÃ¡ch sá»­ dá»¥ng Docker Compose Ä‘á»ƒ triá»ƒn khai á»©ng dá»¥ng má»™t cÃ¡ch nhanh chÃ³ng.

![structured blocks](/static/img/posts/springbootdockercover.png)

## 2. CÃ¡c cÃ´ng cá»¥, cÃ´ng nghá»‡

- 1. JDK (17+)
- 2. Spring Boot (version )
- 3. IntelliJ IDEA ()
- 4. Docker desktop

Okay, let's get started.

## 3. XÃ¢y dá»±ng á»©ng dá»¥ng Spring Boot Ä‘Æ¡n giáº£n.

Äá»ƒ táº¡o má»™t á»©ng dá»¥ng Spring Boot Ä‘Æ¡n giáº£n, cÃ¡c báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng [Spring Initializr](https://start.spring.io/)

### 1.1 - LÃ  gÃ¬?

TrÆ°á»›c tiÃªn thÃ¬ "secure code" chá»‰ lÃ  cÃ¡i tÃªn thÃ´i anh em nhÃ©, anh em cÃ³ thá»ƒ gá»i nÃ³ báº±ng nhiá»u cÃ¡i tÃªn khÃ¡c (secret code, private code) miá»…n sao anh em hiá»ƒu vai trÃ² cá»§a nÃ³ lÃ  Ä‘Æ°á»£c.

Chi tiáº¿t hÆ¡n thÃ¬ trong bÃ i viáº¿t nÃ y secure code lÃ  má»™t chuá»—i kÃ½ tá»± vÃ  lÃ  káº¿t quáº£ sau khi chÃºng ta bÄƒm (hash) má»™t Ä‘á»‘i tÆ°á»£ng thÃ´ng tin khÃ¡c (chuá»—i, files) báº±ng thuáº­t toÃ¡n bÄƒm (SHA256, MD5, SHA512...)

Táº¡i sao láº¡i lÃ  bÄƒm (hashing) mÃ  khÃ´ng pháº£i lÃ  mÃ£ hÃ³a? CÃ¢u há»i nÃ y tÃ½ mÃ¬nh sáº½ tráº£ lá»i á»Ÿ má»¥c 1.2 nhÃ©.

CÃ²n gÃ¬ ná»¯a nhá»‰ ğŸ¤” Ã€ Ä‘áº¥y lÃ  káº¿t quáº£ cá»§a thuáº­t toÃ¡n bÄƒm thÃ¬ cháº¯c anh em cÅ©ng biáº¿t rá»“i nhá»‰! NÃ³ cÃ³ thá»ƒ tráº£ vá» má»™t chuá»—i text hoáº·c má»™t chuá»—i hex vÃ  chÃºng ta cÃ³ thá»ƒ cá»‘ Ä‘á»‹nh Ä‘á»™ dÃ i cá»§a chuá»—i nÃ y.

Okay, mÃ¬nh nghÄ© váº­y lÃ  Ä‘á»§ Ä‘á»ƒ anh em hÃ¬nh dung Ä‘Æ°á»£c secure code lÃ  gÃ¬ rá»“i ha. SÃ¢u xa hÆ¡n thÃ¬ anh em cÃ³ thá»ƒ google thÃªm cho tÆ°á»ng táº­n chÃ¢n lÃ´ng káº½ tÃ³c nhÃ© ğŸ˜‰

### 1.2 - Äá»ƒ lÃ m gÃ¬?

NhÆ° mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p tá»« Ä‘áº§u bÃ i viáº¿t thÃ¬ secure code chÃºng ta Ä‘ang nÃ³i Ä‘áº¿n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n cá»§a gÃ³i tin.

Tháº¿ nÃ o lÃ  tÃ­nh toÃ n váº¹n vÃ  táº¡i sao chÃºng ta pháº£i Ä‘áº£m báº£o thÃ¬ mÃ¬nh sáº½ giáº£i thÃ­ch ngay sau Ä‘Ã¢y:

Thá»© nháº¥t lÃ  tÃ­nh toÃ n váº¹n, mÃ¬nh láº¥y vÃ­ dá»¥ thá»±c táº¿ cho dá»… hiá»ƒu nhÃ©. Cháº³ng háº¡n mÃ¬nh gá»i API Ä‘Äƒng nháº­p cá»§a há»‡ thá»‘ng Ä‘á»‘i tÃ¡c vÃ  API Ä‘Ã³ yÃªu cáº§u mÃ¬nh pháº£i gá»­i cÃ¡c thÃ´ng tin nhÆ° username, password.

Váº¥n Ä‘á» lÃ  hai há»‡ thá»‘ng khi Ä‘Ã³ sáº½ giao tiáº¿p vá»›i nhau qua mÃ´i trÆ°á»ng internet vÃ  mÃ¬nh giáº£ sá»­ tin táº·c hay báº¥t cá»© má»™t lÃ½ do Ä‘Æ°á»ng truyá»n nÃ o Ä‘Ã³ khiáº¿n cho ná»™i dung gÃ³i tin (username, password hoáº·c cÃ¡c thÃ´ng tin kÃ¨m theo) bá»‹ thay Ä‘á»•i thÃ¬ sáº½ nhÆ° tháº¿ nÃ o!? ÄÃ³ chÃ­nh lÃ  tÃ­nh toÃ n váº¹n.

Thá»© hai, táº¡i sao chÃºng ta pháº£i Ä‘áº£m báº£o tÃ­nh toÃ¡n váº¹n? Theo mÃ¬nh cÃ³ hai lÃ½ do chÃ­nh Ä‘Ã³ lÃ  Ä‘á»©ng á»Ÿ gÃ³c Ä‘á»™ báº£o máº­t vÃ  á»Ÿ gÃ³c Ä‘á»™ validate dá»¯ liá»‡u.

Cá»¥ thá»ƒ thÃ¬ anh em biáº¿t ráº±ng Ä‘á»‘i vá»›i cÃ¡c thuáº­t toÃ¡n bÄƒm (hashing) chÃºng ta sáº½ khÃ´ng thá»ƒ giáº£i mÃ£ ngÆ°á»£c láº¡i Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c thÃ´ng tin Ä‘áº§u vÃ o tá»« káº¿t quáº£ bÄƒm. CÃ¡ch duy nháº¥t Ä‘á»ƒ so khá»›p thÃ´ng tin Ä‘Ã³ lÃ  á»Ÿ cáº£ hai phÃ­a pháº£i cÃ³ thÃ´ng tin Ä‘áº§u vÃ o chÃ­nh xÃ¡c sau Ä‘Ã³ cÃ¹ng bÄƒm (thÃ´ng qua má»™t thuáº­t toÃ¡n, quy táº¯c cá»¥ thá»ƒ) vÃ  so sÃ¡nh káº¿t quáº£ hÃ m bÄƒm xem cÃ³ trÃ¹ng khá»›p hay khÃ´ng.

Lá»£i dá»¥ng Ä‘áº·c tÃ­nh nÃ y cá»§a cÃ¡c thuáº­t toÃ¡n bÄƒm chÃºng ta sáº½ báº£o Ä‘áº£m Ä‘Æ°á»£c thÃ´ng tin gá»­i Ä‘i lÃ  báº£o máº­t vÃ  tá»« Ä‘Ã³ viá»‡c validate dá»¯ liá»‡u chá»‰ Ä‘Æ°á»£c diá»…n ra á»Ÿ hai Ä‘áº§u hai há»‡ thá»‘ng.

## 2. VÃ­ dá»¥

### 2.1 - BÃ i toÃ¡n

Trong bÃ i viáº¿t hÃ´m nay mÃ¬nh sáº½ láº¥y vÃ­ dá»¥ mÃ  mÃ¬nh tá»«ng lÃ m khi tÃ­ch há»£p vá»›i há»‡ thá»‘ng cá»§a Ä‘á»‘i tÃ¡c bÃªn mÃ¬nh. BÃ i toÃ¡n há» Ä‘Æ°a ra nhÆ° sau:

Há»‡ thá»‘ng bÃªn há» cáº¥p cho bÃªn mÃ¬nh má»™t sá»‘ APIs Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c chá»©c nÄƒng thanh toÃ¡n dá»‹ch vá»¥ cá»§a ngÆ°á»i dÃ¹ng (vd: thanh toÃ¡n tiá»n Ä‘iá»‡n, tiá»n nÆ°á»›c...)

Giáº£ sá»­ trÆ°á»ng há»£p thanh toÃ¡n Ä‘iá»‡n yÃªu cáº§u truyá»n nhá»¯ng thÃ´ng tin (vÃ­ dá»¥ thÃ´i anh em nhÃ©) dÆ°á»›i dáº¡ng má»™t JSON nhÆ° sau:

```JSON
{
  "version":"2.0.0",
  "partnerId":"202131",
  "serviceId":"200",
  "channelId":"10",
  "paymentCode":"10354395",
  "transDateTime":"20220620101832",
  "secureCode":"f78fc10408cf6c01627d2323f43de5bd1e91c69d6fda079b4a99f5e6b2cc13f7"
}
```

Anh em khÃ´ng cáº§n quan tÃ¢m nhá»¯ng trÆ°á»ng nÃ y cÃ³ Ã½ nghÄ©a gÃ¬ mÃ  chá»‰ cáº§n táº­p trung vÃ o trÆ°á»ng secureCode

TrÆ°á»ng nÃ y sáº½ Ä‘Æ°á»£c sinh ra vá»›i quy táº¯c sau:

MÃ¬nh pháº£i káº¿t há»£p táº¥t cáº£ thÃ´ng tin cá»§a cÃ¡c trÆ°á»ng láº¡i vá»›i nhau theo Ä‘Ãºng thá»© tá»± cÃ¡c trÆ°á»ng vÃ  phÃ¢n cÃ¡ch bá»Ÿi dáº¥u | (hoáº·c báº¥t cá»© kÃ½ tá»± nÃ o tÃ¹y thuá»™c vÃ o quy táº¯c), cuá»‘i cÃ¹ng lÃ  má»™t chuá»—i secret key Ä‘Æ°á»£c cáº¥p bÃ­ máº­t giá»¯a hai há»‡ thá»‘ng Ä‘á»ƒ táº¡o thÃ nh má»™t chuá»—i duy nháº¥t vÃ  thá»±c hiá»‡n bÄƒm chuá»—i Ä‘Ã³ vá»›i thuáº­t toÃ¡n SHA256 Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c secure code

VÃ­ dá»¥ vá»›i dá»¯ liá»‡u nhÆ° bÃªn trÃªn thÃ¬ chuá»—i trÆ°á»›c khi bÄƒm cá»§a mÃ¬nh cÃ³ dáº¡ng:

```text
2.0.0|202131|200|10|10354395|20220620101832
```

VÃ  náº¿u mÃ¬nh cÃ³ secret key lÃ  8dka089f2960d1s148c06b343da1201 thÃ¬ chuá»—i hoÃ n chá»‰nh trÆ°á»›c khi bÄƒm sáº½ nhÆ° sau:

```
2.0.0|202131|200|10|10354395|20220620101832|8dka089f2960d1s148c06b343da1201
```

Giá» Ä‘Ã¢y anh em Ä‘em chuá»—i nÃ y Ä‘i bÄƒm vá»›i thuáº­t toÃ¡n SHA256 sáº½ cÃ³ Ä‘Æ°á»£c secure code nhÆ° vÃ­ dá»¥ bÃªn trÃªn cá»§a mÃ¬nh. CÃ¢u há»i lÃ  bÄƒm á»Ÿ Ä‘Ã¢u ğŸ˜ Anh em cÃ³ thá»ƒ tham kháº£o trang nÃ y Ä‘á»ƒ test thá»­ (lÆ°u Ã½ lÃ  chá»n input dáº¡ng text nha)

CÃ²n táº¥t nhiÃªn trong bÃ i viáº¿t hÃ´m nay mÃ¬nh sáº½ cÃ¹ng anh em triá»ƒn khai code Ä‘á»ƒ giáº£i bÃ i toÃ¡n nÃ y.

### 2.2 - Coding

Háº§u háº¿t cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘á»u há»— trá»£ cÃ¡c thuáº­t toÃ¡n bÄƒm vÃ  trong bÃ i viáº¿t nÃ y mÃ¬nh váº«n sáº½ sá»­ dá»¥ng Java lÃ  ngÃ´n ngá»¯ Ä‘á»ƒ triá»ƒn khai code nha anh em.

Äáº§u tiÃªn thÃ¬ anh em nÃ o code Java Ä‘á»u biáº¿t chÃºng ta pháº£i táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) Ä‘á»ƒ cÃ³ thá»ƒ "bá»c" dá»¯ liá»‡u vÃ  gá»­i Ä‘i. Trong vÃ­ dá»¥ nÃ y giáº£ sá»­ mÃ¬nh táº¡o Ä‘á»‘i tÆ°á»£ng Request vá»›i cÃ¡c thÃ´ng tin nhÆ° sau:

```java
@Data
public class Request {
    private String version;
    private String partnerId;
    private String serviceId;
    private String channelId;
    private String paymentCode;
    private String transDateTime;
    private String secureCode;
}
```

**Note:** á» Ä‘Ã¢y mÃ¬nh cÃ³ sá»­ dá»¥ng annotation @Data cá»§a thÆ° viá»‡n lombok Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a viá»‡c viáº¿t cÃ¡c hÃ m setter, getter. Anh em nÃ o chÆ°a biáº¿t cÃ³ thá»ƒ tham kháº£o thÃªm nhÃ©.

Okay sau táº¡o xong Ä‘á»‘i tÆ°á»£ng thÃ¬ quay láº¡i vÃ  phÃ¢n tÃ­ch xem bÃ i toÃ¡n cá»§a chÃºng ta yÃªu cáº§u gÃ¬ nÃ o?

ChÃºng ta pháº£i táº¡o ra Ä‘Æ°á»£c má»™t chuá»—i tá»« giÃ¡ trá»‹ cá»§a cÃ¡c trÆ°á»ng dá»¯ liá»‡u theo quy táº¯c bÃªn trÃªn (Ä‘Ãºng thá»© tá»± vÃ  phÃ¢n cÃ¡ch bá»Ÿi dáº¥u | ) sau Ä‘Ã³ ghÃ©p thÃªm secret key vÃ o cuá»‘i.

Okay, dá»… thÃ´i! ChÃºng ta chá»‰ cáº§n override láº¡i hÃ m toString() cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ nhÆ° sau lÃ  xong?

```Java
@Data
public class Request {
    private String version;
    private String partnerId;
    private String serviceId;
    private String channelId;
    private String paymentCode;
    private String transDateTime;
    private String secureCode;

    @Override
    public String toString() {
        return version + "|" + partnerId + "|"+ serviceId + "|"
                + channelId + "|" + paymentCode + "|"+ transDateTime;
    }
}
```

LÆ°u Ã½ á»Ÿ Ä‘Ã¢y chÃºng ta sáº½ khÃ´ng sá»­ dá»¥ng trÆ°á»ng sercureCode trong hÃ m toString() vÃ¬ báº£n cháº¥t nhÆ° mÃ¬nh Ä‘Ã£ trÃ¬nh bÃ y giÃ¡ trá»‹ trÆ°á»ng nÃ y sáº½ Ä‘Æ°á»£c chÃºng ta sinh ra thÃ´ng qua thuáº­t toÃ¡n bÄƒm sau Ä‘Ã³ má»›i Ä‘Æ°á»£c set ngÆ°á»£c trá»Ÿ láº¡i vÃ  gá»­i theo gÃ³i tin.

Hai ná»¯a viá»‡c sá»­ dá»¥ng hÃ m toString() ráº¥t Ä‘Æ¡n giáº£n Ä‘á»ƒ chÃºng ta Ä‘Ã¡p á»©ng Ä‘Æ°á»£c bÃ i toÃ¡n nhÆ°ng rÃµ rÃ ng nÃ³ hÆ¡i "thá»§ cÃ´ng" vÃ¬ phá»¥ thuá»™c vÃ o tá»«ng Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ. NÃ³i cÃ¡ch khÃ¡c chÃºng ta pháº£i override hÃ m nÃ y cho tá»«ng Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau. Váº­y giáº£ sá»­ cÃ³ hÃ m trÄƒm Ä‘á»‘i tÆ°á»£ng thÃ¬ sáº½ nhÆ° tháº¿ nÃ o?

KhÃ´ng láº½ tay to viáº¿t hÃ m toString() cho tá»«ng Ä‘á»‘i tÆ°á»£ng!? ğŸ¤” Okay, pháº§n nÃ y mÃ¬nh sáº½ Ä‘Æ°a ra giáº£i phÃ¡p cho anh em sau, táº¡m thá»i chÃºng ta táº­p trung vÃ o bÃ i toÃ¡n vÃ  sá»­ dá»¥ng hÃ m toString() nhÆ° bÃªn trÃªn nhÃ©.

Äá»ƒ sá»­ dá»¥ng thuáº­t toÃ¡n bÄƒm trong Java chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng class MessageDigest. VÃ  Ä‘oáº¡n code hoÃ n chá»‰nh Ä‘á»ƒ sinh secure code cá»§a mÃ¬nh nhÆ° bÃªn dÆ°á»›i.

```Java
public static String generateSecureCode(String strInput, String secretKey, String algorithm) {
    String resultStr = strInput + "|" + secretKey;

    // sá»­ dá»¥ng thuáº­t toÃ¡n bÄƒm Ä‘á»ƒ bÄƒm chuá»—i Ä‘áº§u vÃ o
    MessageDigest md;
    try {
        md = MessageDigest.getInstance(algorithm);
    } catch (NoSuchAlgorithmException e) {
        throw new IllegalArgumentException(e);
    }
    byte[] bytes = md.digest(resultStr.getBytes(StandardCharsets.UTF_8));

    // chuyá»ƒn tá»« bytes -> text
    BigInteger number = new BigInteger(1, bytes);
    StringBuilder hexString = new StringBuilder(number.toString(16));
    while (hexString.length() < 64)
        hexString.insert(0, '0');
    return hexString.toString();
}
```

BÃ¢y giá» Ä‘á»ƒ Ä‘Æ¡n giáº£n mÃ¬nh viáº¿t hÃ m main Ä‘á»ƒ mÃ´ táº£ Ä‘á»‘i tÆ°á»£ng vÃ  cÃ¡ch chÃºng ta sinh secure code nhÆ° sau:

```java
public static void main(String[] args) {
    Request request = new Request();
    request.setVersion("2.0.0");
    request.setPartnerId("202131");
    request.setServiceId("200");
    request.setChannelId("10");
    request.setPaymentCode("10354395");
    request.setTransDateTime("20220620101832");

    String secureCode = generateSecureCode(request.toString(), SECRET_KEY, SHA_256);
    System.out.println(secureCode);

    request.setSecureCode(secureCode); // set láº¡i secure code cho Ä‘á»‘i tÆ°á»£ng request
}
```

Sau khi cháº¡y hÃ m `main()` anh em cÃ³ thá»ƒ tháº¥y secure code Ä‘Æ°á»£c sinh ra giá»‘ng vá»›i nhÆ° trong vÃ­ dá»¥ cá»§a mÃ¬nh. Anh em cÅ©ng cÃ³ thá»ƒ thá»­ Ä‘á»•i báº¥t ká»³ giÃ¡ trá»‹ cá»§a trÆ°á»ng nÃ o Ä‘Ã³ hoáº·c thá»© tá»± cÃ¡c trÆ°á»ng thÃ¬ Ä‘á»u nháº­n vá» má»™t káº¿t khÃ¡c nhau. ChÃ­nh Ä‘iá»u nÃ y giÃºp cho cÃ¡c há»‡ thá»‘ng kiá»ƒm tra vÃ  Ä‘áº£m Ä‘Æ°á»£c tÃ­nh toÃ n váº¹n cá»§a táº­p dá»¯ liá»‡u khi trao Ä‘á»•i thÃ´ng tin vá»›i nhau.

Bonus: NhÆ° mÃ¬nh Ä‘Ã£ Ä‘á» cáº­p viá»‡c sá»­ dá»¥ng hÃ m toString() tuy Ä‘Æ¡n giáº£n nhÆ°ng láº¡i khÃ¡ "thá»§ cÃ´ng" vÃ  Ä‘á»ƒ bá»›t "tay to" hÆ¡n thÃ¬ sáº½ sá»­ dá»¥ng Java Reflection Ä‘á»ƒ táº¡o ra chuá»—i trÆ°á»›c khi bÄƒm theo yÃªu cáº§u nhÆ° sau:

```
Class<Object> clazz = (Class<Object>) obj.getClass();
Field[] fields = clazz.getDeclaredFields();

List<Object> fieldValues = new ArrayList<>();
try {
    for (Field field : fields)
        if (!IGNORE_FIELDS.equals(field.getName())) {
            Field declaredField = obj.getClass().getDeclaredField(field.getName());
            declaredField.setAccessible(true);
            // trÆ°á»ng há»£p trÆ°á»ng dá»¯ liá»‡u kiá»ƒu String
            if(declaredField.get(obj) instanceof String) {
                String value = (String) declaredField.get(obj);
                fieldValues.add(value);
            }
            // trÆ°á»ng há»£p trÆ°á»ng dá»¯ liá»‡u kiá»ƒu Integer
            if(declaredField.get(obj) instanceof Integer) {
                Integer value = (Integer) declaredField.get(obj);
                fieldValues.add(value);
            }
        }
} catch (IllegalAccessException | NoSuchFieldException e) {
    e.printStackTrace();
}
fieldValues.forEach(field -> resultBuilder.append(field).append("|"));
resultBuilder.append(secretKey);
```

NhÃ¬n hÆ¡i phá»©c táº¡p nhá»‰, náº¿u anh em nÃ o chÆ°a náº¯m Ä‘Æ°á»£c vá» Java Reflection thÃ¬ cÃ³ thá»ƒ google thÃªm hoáº·c skip qua Ä‘oáº¡n nÃ y cÅ©ng Ä‘Æ°á»£c nha. CÃ²n anh em nÃ o hiá»ƒu rá»“i thÃ¬ nhÃ¬n Ä‘oáº¡n code nÃ y cÅ©ng biáº¿t mÃ¬nh Ä‘ang lÃ m gÃ¬! ğŸ˜‰ğŸ˜

á» Ä‘Ã¢y Ä‘Æ¡n giáº£n mÃ¬nh Ä‘á»c cÃ¡c trÆ°á»ng (fields) tá»« Ä‘á»‘i tÆ°á»£ng truyá»n vÃ o (trong vÃ­ dá»¥ cá»§a chÃºng ta lÃ  Ä‘á»‘i tÆ°á»£ng Request) vÃ  láº¥y ra giÃ¡ trá»‹ cá»§a chÃºng. MÃ¬nh sáº½ pháº£i kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u cá»§a tá»«ng field vÃ  Ã©p chÃºng vá» kiá»ƒu tÆ°Æ¡ng á»©ng.

Vá»›i má»—i field nhÆ° tháº¿ sáº½ "nhÃ©t" giÃ¡ trá»‹ cá»§a field Ä‘Ã³ vÃ o má»™t List (ngoáº¡i trá»« trÆ°á»ng secureCode vÃ¬ trÆ°á»ng nÃ y khÃ´ng sá»­ dá»¥ng vÃ  mÃ¬nh cÃ³ check á»Ÿ Ä‘oáº¡n IGNORE_FIELDS) vÃ  cuá»‘i cÃ¹ng mÃ¬nh chá»‰ cáº§n Ä‘á»c tá»« List Ä‘Ã³ ra rá»“i táº¡o chuá»—i nhÆ° mÃ¬nh mong muá»‘n.

Note: Náº¿u sá»­ dá»¥ng Java Reflection thÃ¬ anh em pháº£i lÆ°u Ã½ Ä‘á»‹nh nghÄ©a cÃ¡c trÆ°á»ng trong Ä‘á»‘i tÆ°á»£ng sao cho Ä‘Ãºng thá»© tá»± náº¿u khÃ´ng Java Reflection sáº½ Ä‘á»c sai thá»© tá»± trÆ°á»ng vÃ  sinh sai secure code Ä‘Ã³.

ToÃ n bá»™ code anh em cÃ³ thá»ƒ tham kháº£o tham kháº£o bÃªn dÆ°á»›i nhÃ©.

```Java
import java.lang.reflect.Field;
import java.math.BigInteger;
import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Util {
    private static final String SECRET_KEY = "8dka089f2960d1s148c06b343da1201";
    private static final String SHA_256 = "SHA-256";
    private static final List<String> IGNORE_FIELDS = Arrays.asList("secureCode");

    public static String generateSecureCode(Object obj, String secretKey, String algorithm) {
        StringBuilder resultBuilder = new StringBuilder();
        Class<Object> clazz = (Class<Object>) obj.getClass();
        Field[] fields = clazz.getDeclaredFields();

        List<Object> fieldValues = new ArrayList<>();
        try {
            for (Field field : fields)
                if (!IGNORE_FIELDS.contains(field.getName())) {
                    Field declaredField = obj.getClass().getDeclaredField(field.getName());
                    declaredField.setAccessible(true);
                    // trÆ°á»ng há»£p trÆ°á»ng dá»¯ liá»‡u kiá»ƒu String
                    if (declaredField.get(obj) instanceof String) {
                        String value = (String) declaredField.get(obj);
                        fieldValues.add(value);
                    }
                    // trÆ°á»ng há»£p trÆ°á»ng dá»¯ liá»‡u kiá»ƒu Integer
                    if (declaredField.get(obj) instanceof Integer) {
                        Integer value = (Integer) declaredField.get(obj);
                        fieldValues.add(value);
                    }
                }
        } catch (IllegalAccessException | NoSuchFieldException e) {
            e.printStackTrace();
        }
        fieldValues.forEach(field -> resultBuilder.append(field).append("|"));
        resultBuilder.append(secretKey);

        MessageDigest md;
        try {
            md = MessageDigest.getInstance(algorithm);
        } catch (NoSuchAlgorithmException e) {
            throw new IllegalArgumentException(e);
        }
        String resultStr = resultBuilder.toString();
        byte[] bytes = md.digest(resultStr.getBytes(StandardCharsets.UTF_8));

        BigInteger number = new BigInteger(1, bytes);
        StringBuilder hexString = new StringBuilder(number.toString(16));
        while (hexString.length() < 64)
            hexString.insert(0, '0');
        return hexString.toString();
    }

    public static void main(String[] args) {
        Request request = new Request();
        request.setVersion("2.0.0");
        request.setPartnerId("202131");
        request.setServiceId("200");
        request.setChannelId("10");
        request.setPaymentCode("10354395");
        request.setTransDateTime("20220620101832");

        String secureCode = generateSecureCode(request, SECRET_KEY, SHA_256);
        System.out.println(secureCode);
        request.setSecureCode(secureCode); // set láº¡i secure code cho Ä‘á»‘i tÆ°á»£ng request
    }
}
```

## 3. Lá»i káº¿t

Váº­y lÃ  trong bÃ i viáº¿t nÃ y mÃ¬nh Ä‘Ã£ cÃ¹ng anh em tÃ¬m hiá»ƒu lÃ½ do cÅ©ng nhÆ° cÃ¡ch Ä‘á»ƒ chÃºng ta sinh ra má»™t Ä‘oáº¡n secure code dá»±a vÃ o thuáº­t toÃ¡n bÄƒm nháº±m há»— trá»£ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n cÅ©ng nhÆ° Ä‘Ãºng Ä‘áº¯n cá»§a gÃ³i tin khi hai hay nhiá»u há»‡ thá»‘ng giao tiáº¿p vá»›i nhau.

Háº¹n gáº·p láº¡i anh em trong cÃ¡c bÃ i viáº¿t tiáº¿p theo nhÃ©! Thanks all!
