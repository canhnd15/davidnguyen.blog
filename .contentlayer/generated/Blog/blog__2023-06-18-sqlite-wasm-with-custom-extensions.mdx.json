{
  "title": "SQLite WASM with Custom Extensions",
  "date": "2023-06-18T00:00:00.000Z",
  "tags": [
    "sqlite",
    "wasm",
    "notes"
  ],
  "lastmod": "2023-08-11T00:00:00.000Z",
  "draft": false,
  "summary": "A concise guide on building SQLite WASM on Ubuntu Linux with custom extensions. Run SQLite in the browser and enable new possibilities by providing an interface to other C libraries through custom extensions.",
  "images": [
    "/static/img/sqlite-wasm-post-banner.png"
  ],
  "layout": "PostLayout",
  "body": {
    "raw": "\n<TOCInline toc={props.toc} asDisclosure toHeading={3} />\n\nThe WebAssembly (WASM) ecosystem has matured over the past couple of years, with growing browser support\nand tooling across different programming languages. On the application side, some very interesting projects\nthat caught my attention include [SQL.js](https://github.com/sql-js/sql.js/), the pioneer project that\ndemonstrated that it could be possible for SQLite to run completely within the browser, and [Pyodide](https://pyodide.org/en/stable/),\nwhich allows for a Python distribution to run within the browser.\n\nI wrote down some notes over the weekend going through the [official SQLite WASM release](https://sqlite.org/wasm/doc/trunk/index.md) while attempting to create a SQLite WASM build with a custom extension. Materials for the post are based on [SQLite documentation](https://sqlite.org/wasm/doc/trunk/building.md) and forum discussions on the latest changes which simplifies adding custom extensions.\n\n## Prerequisites\n\n### Install GCC and Cmake\n\n```bash\n$ sudo apt update\n$ sudo apt install build-essential cmake\n```\n\n### Install Enscripten SDK\n\n> Emscripten is a complete Open Source compiler toolchain to WebAssembly. Using Emscripten you can:\n>\n> Compile C and C++ code, or any other language that uses LLVM, into WebAssembly, and run it on the Web, Node.js, or other wasm runtimes.\n\n```bash\n# Clone the emscripten repository:\n$ sudo apt install git\n$ git clone https://github.com/emscripten-core/emsdk.git\n$ cd emsdk\n\n# Download and install the latest SDK tools:\n$ ./emsdk install latest\n\n# Make the \"latest\" SDK \"active\" for the current user:\n$ ./emsdk activate latest\n\n# Add to shell\n$ echo 'source \"/home/user/emsdk/emsdk_env.sh\"' >> $HOME/.bash_profile\n```\n\n### Install WASM Binary Toolkit (Wabt tools)\n\nWe need `wasm-strip` for a production build as:\n\n> Emscripten's approach to mangling and minifying symbol names is incompatible with the sqlite3 build (resulting in completely non-functional JS files), the builds have to be created with full debugging info enabled using -g3. That inhibits Emscripten's minification of symbols but it also leads to huge .wasm files. wasm-strip can then shrink those by removing the debugging symbols. wasm-strip is automatically used if the build finds it. If it is not found, the build will warn but function, the main drawback being that the .wasm files will be extremely large.\n\n```bash\n$ git clone --recursive https://github.com/WebAssembly/wabt\n$ cd wabt\n$ git submodule update --init\n\n# Install\n$ mkdir build\n$ cd build\n$ cmake ..\n$ cmake --build .\n\n# Add to shell\n$ export PATH=\"$HOME/wabt/build:$PATH\"\n```\n\n## Building SQLite WASM\n\n### Development build\n\nEach build produces a number of artifacts, including:\n\n- `jswasm/sqlite3.{js,mjs,wasm}` are the core-most versions of the library and its APIs. Several other JS and WASM files are also built to this directory. sqlite3.mjs is the same as sqlite3.js except for very minor differences required for loading it as an ES6 module.\n- `jswasm/_-bundler-friendly._` are variant builds intended to be used with JS \"bundler\" tools.\n- `fiddle/fiddle-module.{js,wasm}` are the core of the fiddle application. The fiddle/ directory can be copied as-is and served via a web server to host the sqlite3 fiddle application.\n\n```bash\n$ https://github.com/sqlite/sqlite.git\n$ cd sqlite\n$ ./configure --enable-all\n$ make sqlite3.c\n$ cd ext/wasm\n$ make\n```\n\nTest out the package by running a local web server and opening the `index.html` file in a browser:\n\n```bash\n$ python3 -m http.server\n```\n\nYou should be greeted with a test page that includes an interactive fiddle application.\n\n![SQLite WASM Test Page](/static/img/sqlite-wasm-test-page.png)\n\n### Production build\n\n```bash\n$ make release\n```\n\nTo zip and release it similar to the [SQLite download page](https://sqlite.org/download.html):\n\n```bash\n$ make dist\n```\n\n## Adding a new extension\n\nTo statically link and distribute SQLite WASM with a custom built-in extension, we can create a `sqlite3_wasm_extra_init.c` file in the `ext/wasm` directory of the source tree and re-run `make`. This is a [relatively new feature](https://sqlite.org/forum/info/1e1c04f3ed1bc96b) released on 27 Feb 23 and simplifies adding custom extensions.\n\nAs explained in the [wasm_sqlite_with_stats repository](https://github.com/llimllib/wasm_sqlite_with_stats):\n\n> [it uses a] preprocessor macro called SQLITE_EXTRA_INIT which will, if defined, load extra code into sqlite after finishing up its own initialization. If you point SQLITE_EXTRA_INIT at a function that calls sqlite3_auto_extension with a pointer to your extension's init function, it will load right after sqlite loads itself and the functions defined within will be available to sqlite.\n\nHowever, there's no need to tinker with the build steps as shown in the above referenced repository since the new changes have made it much easier to add a custom extension.\n\n### Adding a rot13 function\n\nLet's add the official rot13 extension to our build.\n\nWe can copy the file from the `ext` directory:\n\n```bash\ncp ../misc/rot13.c .\n```\n\nor download it from this [link](https://www.sqlite.org/src/file/ext/misc/rot13.c).\n\nNext, create `sqlite3_wasm_extra_init.c` with the following contents:\n\n```c\n/*\n** If the canonical build process finds the file\n** sqlite3_wasm_extra_init.c in the main wasm build directory, it\n** arranges to include that file in the build of sqlite3.wasm and\n** defines SQLITE_EXTRA_INIT=sqlite3_wasm_extra_init.\n**\n** The C file must define the function sqlite3_wasm_extra_init() with\n** this signature:\n**\n**  int sqlite3_wasm_extra_init(const char *)\n**\n** and the sqlite3 library will call it with an argument of NULL one\n** time during sqlite3_initialize(). If it returns non-0,\n** initialization of the library will fail.\n*/\n\n#include \"sqlite3.h\"\n#include <stdio.h>\n#include \"rot13.c\"\n\nint sqlite3_wasm_extra_init(const char *z){\n  int nErr = 0;\n  nErr += sqlite3_auto_extension((void(*)())sqlite3_rot_init);\n  return nErr ? SQLITE_ERROR : SQLITE_OK;\n}\n```\n\nWe use the [sqlite3_auto_extension](https://www.sqlite.org/c3ref/auto_extension.html) function to register the rot13 extension. Note, SQLite will call the function with an argument of NULL one time during sqlite3_initialize(). If it returns non-0, initialization of the library will fail.\n\nRe-run `make` in the `ext/wasm` directory. The new build will include the rot13 extension. However, as pointed out in the [forums](https://sqlite.org/forum/info/1e1c04f3ed1bc96b), this is not included in the fiddle and speedtest1 build by default as the fiddle includes `shell.c` which includes a number of built-in extensions that might clash with the custom extension.\n\n### Building a fiddle with the custom extension\n\nNonetheless, it might still be convenient to build a fiddle with the custom extension so we can quickly test it out. To do so, we need to edit `fiddle.make` by adding the `DSQLITE_WASM_EXTRA_INIT` flag to [fiddle.emcc-flaggs](https://github.com/sqlite/sqlite/blob/version-3.42.0/ext/wasm/fiddle.make#L27-L43) i.e. it should look like:\n\n```make\nfiddle.emcc-flags = \\\n  ...\n  -DSQLITE_SHELL_FIDDLE \\\n  -DSQLITE_WASM_EXTRA_INIT\n```\n\nAlso edit [fiddle.cses](https://github.com/sqlite/sqlite/blob/version-3.42.0/ext/wasm/fiddle.make#L55) to:\n\n```make\nfiddle.cses := $(dir.top)/shell.c $(sqlite3-wasm.cfiles)\n```\n\nThe code might change in feature releases, but the general idea is that we need to add the `DSQLITE_WASM_EXTRA_INIT` flag and `sqlite3_wasm_extra_init.c` to the fiddle build.\n\nRe-run `make` in the `ext/wasm` directory and you should be able to use the rot13 function in the fiddle like so:\n\n```sql\nSELECT rot13('Uryyb Jbeyq');\n```\n\n![SQLite WASM Fiddle](/static/img/sqlite-wasm-fiddle.png)\n\n## Demo\n\nAs everything is self-contained within the fiddle directory, we can just drag and drop it to Netlify and serve it as a static site. Try it out over [here](https://sqlite-wasm-rot13.netlify.app/).\n\n## SQLite Extension Template\n\n11 Aug 2023, Update - I've created a [SQLite Extension Template](https://github.com/timlrx/sqlite-extension-template). It expands on what is covered in the post and supports building a C / C++ extension with a loadable module, static extension, WebAssembly distribution with fiddle and a Python package.\n",
    "code": "var Component=(()=>{var mn=Object.create;var A=Object.defineProperty;var cn=Object.getOwnPropertyDescriptor;var un=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty;var z=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),_n=(o,e)=>{for(var f in e)A(o,f,{get:e[f],enumerable:!0})},ge=(o,e,f,p)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let x of un(e))!bn.call(o,x)&&x!==f&&A(o,x,{get:()=>e[x],enumerable:!(p=cn(e,x))||p.enumerable});return o};var hn=(o,e,f)=>(f=o!=null?mn(fn(o)):{},ge(e||!o||!o.__esModule?A(f,\"default\",{value:o,enumerable:!0}):f,o)),pn=o=>ge(A({},\"__esModule\",{value:!0}),o);var De=z((Dn,ke)=>{ke.exports=React});var Ue=z(B=>{\"use strict\";(function(){\"use strict\";var o=De(),e=Symbol.for(\"react.element\"),f=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),x=Symbol.for(\"react.strict_mode\"),H=Symbol.for(\"react.profiler\"),X=Symbol.for(\"react.provider\"),K=Symbol.for(\"react.context\"),E=Symbol.for(\"react.forward_ref\"),O=Symbol.for(\"react.suspense\"),P=Symbol.for(\"react.suspense_list\"),T=Symbol.for(\"react.memo\"),j=Symbol.for(\"react.lazy\"),Se=Symbol.for(\"react.offscreen\"),G=Symbol.iterator,Re=\"@@iterator\";function Ce(d){if(d===null||typeof d!=\"object\")return null;var a=G&&d[G]||d[Re];return typeof a==\"function\"?a:null}var k=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(d){{for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];Ie(\"error\",d,i)}}function Ie(d,a,i){{var s=k.ReactDebugCurrentFrame,t=s.getStackAddendum();t!==\"\"&&(a+=\"%s\",i=i.concat([t]));var m=i.map(function(r){return String(r)});m.unshift(\"Warning: \"+a),Function.prototype.apply.call(console[d],console,m)}}var qe=!1,Ae=!1,Oe=!1,Pe=!1,je=!1,J;J=Symbol.for(\"react.module.reference\");function Le(d){return!!(typeof d==\"string\"||typeof d==\"function\"||d===p||d===H||je||d===x||d===O||d===P||Pe||d===Se||qe||Ae||Oe||typeof d==\"object\"&&d!==null&&(d.$$typeof===j||d.$$typeof===T||d.$$typeof===X||d.$$typeof===K||d.$$typeof===E||d.$$typeof===J||d.getModuleId!==void 0))}function $e(d,a,i){var s=d.displayName;if(s)return s;var t=a.displayName||a.name||\"\";return t!==\"\"?i+\"(\"+t+\")\":i}function Z(d){return d.displayName||\"Context\"}function N(d){if(d==null)return null;if(typeof d.tag==\"number\"&&b(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof d==\"function\")return d.displayName||d.name||null;if(typeof d==\"string\")return d;switch(d){case p:return\"Fragment\";case f:return\"Portal\";case H:return\"Profiler\";case x:return\"StrictMode\";case O:return\"Suspense\";case P:return\"SuspenseList\"}if(typeof d==\"object\")switch(d.$$typeof){case K:var a=d;return Z(a)+\".Consumer\";case X:var i=d;return Z(i._context)+\".Provider\";case E:return $e(d,d.render,\"ForwardRef\");case T:var s=d.displayName||null;return s!==null?s:N(d.type)||\"Memo\";case j:{var t=d,m=t._payload,r=t._init;try{return N(r(m))}catch{return null}}}return null}var g=Object.assign,v=0,ee,ne,de,ae,ie,se,le;function re(){}re.__reactDisabledLog=!0;function We(){{if(v===0){ee=console.log,ne=console.info,de=console.warn,ae=console.error,ie=console.group,se=console.groupCollapsed,le=console.groupEnd;var d={configurable:!0,enumerable:!0,value:re,writable:!0};Object.defineProperties(console,{info:d,log:d,warn:d,error:d,group:d,groupCollapsed:d,groupEnd:d})}v++}}function Fe(){{if(v--,v===0){var d={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:g({},d,{value:ee}),info:g({},d,{value:ne}),warn:g({},d,{value:de}),error:g({},d,{value:ae}),group:g({},d,{value:ie}),groupCollapsed:g({},d,{value:se}),groupEnd:g({},d,{value:le})})}v<0&&b(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var L=k.ReactCurrentDispatcher,$;function S(d,a,i){{if($===void 0)try{throw Error()}catch(t){var s=t.stack.trim().match(/\\n( *(at )?)/);$=s&&s[1]||\"\"}return`\n`+$+d}}var W=!1,R;{var Me=typeof WeakMap==\"function\"?WeakMap:Map;R=new Me}function te(d,a){if(!d||W)return\"\";{var i=R.get(d);if(i!==void 0)return i}var s;W=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var m;m=L.current,L.current=null,We();try{if(a){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(r,[])}catch(y){s=y}Reflect.construct(d,[],r)}else{try{r.call()}catch(y){s=y}d.call(r.prototype)}}else{try{throw Error()}catch(y){s=y}d()}}catch(y){if(y&&s&&typeof y.stack==\"string\"){for(var l=y.stack.split(`\n`),_=s.stack.split(`\n`),c=l.length-1,u=_.length-1;c>=1&&u>=0&&l[c]!==_[u];)u--;for(;c>=1&&u>=0;c--,u--)if(l[c]!==_[u]){if(c!==1||u!==1)do if(c--,u--,u<0||l[c]!==_[u]){var h=`\n`+l[c].replace(\" at new \",\" at \");return d.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",d.displayName)),typeof d==\"function\"&&R.set(d,h),h}while(c>=1&&u>=0);break}}}finally{W=!1,L.current=m,Fe(),Error.prepareStackTrace=t}var U=d?d.displayName||d.name:\"\",xe=U?S(U):\"\";return typeof d==\"function\"&&R.set(d,xe),xe}function Qe(d,a,i){return te(d,!1)}function Ye(d){var a=d.prototype;return!!(a&&a.isReactComponent)}function C(d,a,i){if(d==null)return\"\";if(typeof d==\"function\")return te(d,Ye(d));if(typeof d==\"string\")return S(d);switch(d){case O:return S(\"Suspense\");case P:return S(\"SuspenseList\")}if(typeof d==\"object\")switch(d.$$typeof){case E:return Qe(d.render);case T:return C(d.type,a,i);case j:{var s=d,t=s._payload,m=s._init;try{return C(m(t),a,i)}catch{}}}return\"\"}var I=Object.prototype.hasOwnProperty,oe={},me=k.ReactDebugCurrentFrame;function q(d){if(d){var a=d._owner,i=C(d.type,d._source,a?a.type:null);me.setExtraStackFrame(i)}else me.setExtraStackFrame(null)}function Ve(d,a,i,s,t){{var m=Function.call.bind(I);for(var r in d)if(m(d,r)){var l=void 0;try{if(typeof d[r]!=\"function\"){var _=Error((s||\"React class\")+\": \"+i+\" type `\"+r+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof d[r]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw _.name=\"Invariant Violation\",_}l=d[r](a,r,s,i,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(c){l=c}l&&!(l instanceof Error)&&(q(t),b(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",s||\"React class\",i,r,typeof l),q(null)),l instanceof Error&&!(l.message in oe)&&(oe[l.message]=!0,q(t),b(\"Failed %s type: %s\",i,l.message),q(null))}}}var ze=Array.isArray;function F(d){return ze(d)}function Be(d){{var a=typeof Symbol==\"function\"&&Symbol.toStringTag,i=a&&d[Symbol.toStringTag]||d.constructor.name||\"Object\";return i}}function He(d){try{return ce(d),!1}catch{return!0}}function ce(d){return\"\"+d}function ue(d){if(He(d))return b(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Be(d)),ce(d)}var w=k.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0},fe,be,M;M={};function Ke(d){if(I.call(d,\"ref\")){var a=Object.getOwnPropertyDescriptor(d,\"ref\").get;if(a&&a.isReactWarning)return!1}return d.ref!==void 0}function Ge(d){if(I.call(d,\"key\")){var a=Object.getOwnPropertyDescriptor(d,\"key\").get;if(a&&a.isReactWarning)return!1}return d.key!==void 0}function Je(d,a){if(typeof d.ref==\"string\"&&w.current&&a&&w.current.stateNode!==a){var i=N(w.current.type);M[i]||(b('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',N(w.current.type),d.ref),M[i]=!0)}}function Ze(d,a){{var i=function(){fe||(fe=!0,b(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",a))};i.isReactWarning=!0,Object.defineProperty(d,\"key\",{get:i,configurable:!0})}}function en(d,a){{var i=function(){be||(be=!0,b(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",a))};i.isReactWarning=!0,Object.defineProperty(d,\"ref\",{get:i,configurable:!0})}}var nn=function(d,a,i,s,t,m,r){var l={$$typeof:e,type:d,key:a,ref:i,props:r,_owner:m};return l._store={},Object.defineProperty(l._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(l,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l};function dn(d,a,i,s,t){{var m,r={},l=null,_=null;i!==void 0&&(ue(i),l=\"\"+i),Ge(a)&&(ue(a.key),l=\"\"+a.key),Ke(a)&&(_=a.ref,Je(a,t));for(m in a)I.call(a,m)&&!Xe.hasOwnProperty(m)&&(r[m]=a[m]);if(d&&d.defaultProps){var c=d.defaultProps;for(m in c)r[m]===void 0&&(r[m]=c[m])}if(l||_){var u=typeof d==\"function\"?d.displayName||d.name||\"Unknown\":d;l&&Ze(r,u),_&&en(r,u)}return nn(d,l,_,t,s,w.current,r)}}var Q=k.ReactCurrentOwner,_e=k.ReactDebugCurrentFrame;function D(d){if(d){var a=d._owner,i=C(d.type,d._source,a?a.type:null);_e.setExtraStackFrame(i)}else _e.setExtraStackFrame(null)}var Y;Y=!1;function V(d){return typeof d==\"object\"&&d!==null&&d.$$typeof===e}function he(){{if(Q.current){var d=N(Q.current.type);if(d)return`\n\nCheck the render method of \\``+d+\"`.\"}return\"\"}}function an(d){{if(d!==void 0){var a=d.fileName.replace(/^.*[\\\\\\/]/,\"\"),i=d.lineNumber;return`\n\nCheck your code at `+a+\":\"+i+\".\"}return\"\"}}var pe={};function sn(d){{var a=he();if(!a){var i=typeof d==\"string\"?d:d.displayName||d.name;i&&(a=`\n\nCheck the top-level render call using <`+i+\">.\")}return a}}function Ne(d,a){{if(!d._store||d._store.validated||d.key!=null)return;d._store.validated=!0;var i=sn(a);if(pe[i])return;pe[i]=!0;var s=\"\";d&&d._owner&&d._owner!==Q.current&&(s=\" It was passed a child from \"+N(d._owner.type)+\".\"),D(d),b('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',i,s),D(null)}}function ye(d,a){{if(typeof d!=\"object\")return;if(F(d))for(var i=0;i<d.length;i++){var s=d[i];V(s)&&Ne(s,a)}else if(V(d))d._store&&(d._store.validated=!0);else if(d){var t=Ce(d);if(typeof t==\"function\"&&t!==d.entries)for(var m=t.call(d),r;!(r=m.next()).done;)V(r.value)&&Ne(r.value,a)}}}function ln(d){{var a=d.type;if(a==null||typeof a==\"string\")return;var i;if(typeof a==\"function\")i=a.propTypes;else if(typeof a==\"object\"&&(a.$$typeof===E||a.$$typeof===T))i=a.propTypes;else return;if(i){var s=N(a);Ve(i,d.props,\"prop\",s,d)}else if(a.PropTypes!==void 0&&!Y){Y=!0;var t=N(a);b(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",t||\"Unknown\")}typeof a.getDefaultProps==\"function\"&&!a.getDefaultProps.isReactClassApproved&&b(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function rn(d){{for(var a=Object.keys(d.props),i=0;i<a.length;i++){var s=a[i];if(s!==\"children\"&&s!==\"key\"){D(d),b(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",s),D(null);break}}d.ref!==null&&(D(d),b(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),D(null))}}function tn(d,a,i,s,t,m){{var r=Le(d);if(!r){var l=\"\";(d===void 0||typeof d==\"object\"&&d!==null&&Object.keys(d).length===0)&&(l+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var _=an(t);_?l+=_:l+=he();var c;d===null?c=\"null\":F(d)?c=\"array\":d!==void 0&&d.$$typeof===e?(c=\"<\"+(N(d.type)||\"Unknown\")+\" />\",l=\" Did you accidentally export a JSX literal instead of a component?\"):c=typeof d,b(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",c,l)}var u=dn(d,a,i,t,m);if(u==null)return u;if(r){var h=a.children;if(h!==void 0)if(s)if(F(h)){for(var U=0;U<h.length;U++)ye(h[U],d);Object.freeze&&Object.freeze(h)}else b(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ye(h,d)}return d===p?rn(u):ln(u),u}}var on=tn;B.Fragment=p,B.jsxDEV=on})()});var we=z((vn,ve)=>{\"use strict\";ve.exports=Ue()});var gn={};_n(gn,{default:()=>xn,frontmatter:()=>Nn});var n=hn(we()),Nn={title:\"SQLite WASM with Custom Extensions\",date:\"2023-06-18\",lastmod:\"2023-08-11\",tags:[\"sqlite\",\"wasm\",\"notes\"],draft:!1,summary:\"A concise guide on building SQLite WASM on Ubuntu Linux with custom extensions. Run SQLite in the browser and enable new possibilities by providing an interface to other C libraries through custom extensions.\",images:[\"/static/img/sqlite-wasm-post-banner.png\"],layout:\"PostLayout\"};function Ee(o){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",h3:\"h3\",pre:\"pre\",code:\"code\",blockquote:\"blockquote\",ul:\"ul\",li:\"li\",div:\"div\"},o.components),{TOCInline:f,Image:p}=e;return p||Te(\"Image\",!0,\"101:1-101:64\"),f||Te(\"TOCInline\",!0,\"12:1-12:57\"),(0,n.jsxDEV)(n.Fragment,{children:[(0,n.jsxDEV)(f,{toc:o.toc,asDisclosure:!0,toHeading:3},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"The WebAssembly (WASM) ecosystem has matured over the past couple of years, with growing browser support and tooling across different programming languages. On the application side, some very interesting projects that caught my attention include \",(0,n.jsxDEV)(e.a,{href:\"https://github.com/sql-js/sql.js/\",children:\"SQL.js\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:16,columnNumber:34},this),\", the pioneer project that demonstrated that it could be possible for SQLite to run completely within the browser, and \",(0,n.jsxDEV)(e.a,{href:\"https://pyodide.org/en/stable/\",children:\"Pyodide\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:17,columnNumber:93},this),\", which allows for a Python distribution to run within the browser.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:14,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"I wrote down some notes over the weekend going through the \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite.org/wasm/doc/trunk/index.md\",children:\"official SQLite WASM release\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:20,columnNumber:60},this),\" while attempting to create a SQLite WASM build with a custom extension. Materials for the post are based on \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite.org/wasm/doc/trunk/building.md\",children:\"SQLite documentation\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:20,columnNumber:243},this),\" and forum discussions on the latest changes which simplifies adding custom extensions.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:20,columnNumber:1},this),(0,n.jsxDEV)(e.h2,{id:\"prerequisites\",children:[(0,n.jsxDEV)(e.a,{href:\"#prerequisites\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Prerequisites\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:22,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"install-gcc-and-cmake\",children:[(0,n.jsxDEV)(e.a,{href:\"#install-gcc-and-cmake\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Install GCC and Cmake\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:24,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"sudo\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"apt\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),` update\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"sudo\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"apt\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"install\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),` build-essential cmake\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:26,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:26,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"install-enscripten-sdk\",children:[(0,n.jsxDEV)(e.a,{href:\"#install-enscripten-sdk\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Install Enscripten SDK\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:31,columnNumber:1},this),(0,n.jsxDEV)(e.blockquote,{children:[(0,n.jsxDEV)(e.p,{children:\"Emscripten is a complete Open Source compiler toolchain to WebAssembly. Using Emscripten you can:\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:33,columnNumber:3},this),(0,n.jsxDEV)(e.p,{children:\"Compile C and C++ code, or any other language that uses LLVM, into WebAssembly, and run it on the Web, Node.js, or other wasm runtimes.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:35,columnNumber:3},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:33,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"# Clone the emscripten repository:\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"sudo\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"apt\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"install\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"git\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"git\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:3,columnNumber:1},this),` clone https://github.com/emscripten-core/emsdk.git\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"cd\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:4,columnNumber:1},this),` emsdk\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"# Download and install the latest SDK tools:\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:6,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ ./emsdk \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"install\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:7,columnNumber:1},this),` latest\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:'# Make the \"latest\" SDK \"active\" for the current user:'},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:9,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`$ ./emsdk activate latest\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"# Add to shell\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"echo\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:13,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token string\",children:`'source \"/home/user/emsdk/emsdk_env.sh\"'`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:13,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\">>\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:13,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token constant environment\",children:\"$HOME\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:13,columnNumber:1},this),`/.bash_profile\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:37,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:37,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"install-wasm-binary-toolkit-wabt-tools\",children:[(0,n.jsxDEV)(e.a,{href:\"#install-wasm-binary-toolkit-wabt-tools\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Install WASM Binary Toolkit (Wabt tools)\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:53,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"We need \",(0,n.jsxDEV)(e.code,{children:\"wasm-strip\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:55,columnNumber:9},this),\" for a production build as:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:55,columnNumber:1},this),(0,n.jsxDEV)(e.blockquote,{children:(0,n.jsxDEV)(e.p,{children:\"Emscripten's approach to mangling and minifying symbol names is incompatible with the sqlite3 build (resulting in completely non-functional JS files), the builds have to be created with full debugging info enabled using -g3. That inhibits Emscripten's minification of symbols but it also leads to huge .wasm files. wasm-strip can then shrink those by removing the debugging symbols. wasm-strip is automatically used if the build finds it. If it is not found, the build will warn but function, the main drawback being that the .wasm files will be extremely large.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:57,columnNumber:3},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:57,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"git\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),\" clone \",(0,n.jsxDEV)(e.span,{className:\"token variable parameter\",children:\"--recursive\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),` https://github.com/WebAssembly/wabt\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"cd\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),` wabt\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"git\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:3,columnNumber:1},this),\" submodule update \",(0,n.jsxDEV)(e.span,{className:\"token variable parameter\",children:\"--init\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:3,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"# Install\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:5,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"mkdir\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:6,columnNumber:1},this),` build\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"cd\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:7,columnNumber:1},this),` build\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ cmake \",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"..\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:8,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ cmake \",(0,n.jsxDEV)(e.span,{className:\"token variable parameter\",children:\"--build\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:9,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\".\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:9,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"# Add to shell\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:11,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"export\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token variable assign-left\",children:(0,n.jsxDEV)(e.span,{className:\"token constant environment\",children:\"PATH\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"=\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token string\",children:['\"',(0,n.jsxDEV)(e.span,{className:\"token constant environment\",children:\"$HOME\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),\"/wabt/build:\",(0,n.jsxDEV)(e.span,{className:\"token constant environment\",children:\"$PATH\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),'\"']},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:12,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:59,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:59,columnNumber:1},this),(0,n.jsxDEV)(e.h2,{id:\"building-sqlite-wasm\",children:[(0,n.jsxDEV)(e.a,{href:\"#building-sqlite-wasm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Building SQLite WASM\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:74,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"development-build\",children:[(0,n.jsxDEV)(e.a,{href:\"#development-build\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Development build\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:76,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:\"Each build produces a number of artifacts, including:\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:78,columnNumber:1},this),(0,n.jsxDEV)(e.ul,{children:[(0,n.jsxDEV)(e.li,{children:[(0,n.jsxDEV)(e.code,{children:\"jswasm/sqlite3.{js,mjs,wasm}\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:80,columnNumber:3},this),\" are the core-most versions of the library and its APIs. Several other JS and WASM files are also built to this directory. sqlite3.mjs is the same as sqlite3.js except for very minor differences required for loading it as an ES6 module.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:80,columnNumber:1},this),(0,n.jsxDEV)(e.li,{children:[(0,n.jsxDEV)(e.code,{children:\"jswasm/_-bundler-friendly._\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:81,columnNumber:3},this),' are variant builds intended to be used with JS \"bundler\" tools.']},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:81,columnNumber:1},this),(0,n.jsxDEV)(e.li,{children:[(0,n.jsxDEV)(e.code,{children:\"fiddle/fiddle-module.{js,wasm}\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:82,columnNumber:3},this),\" are the core of the fiddle application. The fiddle/ directory can be copied as-is and served via a web server to host the sqlite3 fiddle application.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:82,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:80,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`$ https://github.com/sqlite/sqlite.git\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"cd\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:2,columnNumber:1},this),` sqlite\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`$ ./configure --enable-all\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:4,columnNumber:1},this),` sqlite3.c\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\"cd\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:5,columnNumber:1},this),` ext/wasm\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:6,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:84,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:84,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Test out the package by running a local web server and opening the \",(0,n.jsxDEV)(e.code,{children:\"index.html\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:93,columnNumber:68},this),\" file in a browser:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:93,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ python3 \",(0,n.jsxDEV)(e.span,{className:\"token variable parameter\",children:\"-m\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),` http.server\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:95,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:95,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:\"You should be greeted with a test page that includes an interactive fiddle application.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:99,columnNumber:1},this),(0,n.jsxDEV)(e.div,{children:(0,n.jsxDEV)(p,{alt:\"SQLite WASM Test Page\",src:\"/static/img/sqlite-wasm-test-page.png\",width:\"1914\",height:\"852\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:101,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:101,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"production-build\",children:[(0,n.jsxDEV)(e.a,{href:\"#production-build\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Production build\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:103,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),` release\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:105,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:105,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"To zip and release it similar to the \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite.org/download.html\",children:\"SQLite download page\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:109,columnNumber:38},this),\":\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:109,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),` dist\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:111,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:111,columnNumber:1},this),(0,n.jsxDEV)(e.h2,{id:\"adding-a-new-extension\",children:[(0,n.jsxDEV)(e.a,{href:\"#adding-a-new-extension\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Adding a new extension\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:115,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"To statically link and distribute SQLite WASM with a custom built-in extension, we can create a \",(0,n.jsxDEV)(e.code,{children:\"sqlite3_wasm_extra_init.c\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:117,columnNumber:97},this),\" file in the \",(0,n.jsxDEV)(e.code,{children:\"ext/wasm\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:117,columnNumber:137},this),\" directory of the source tree and re-run \",(0,n.jsxDEV)(e.code,{children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:117,columnNumber:188},this),\". This is a \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite.org/forum/info/1e1c04f3ed1bc96b\",children:\"relatively new feature\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:117,columnNumber:206},this),\" released on 27 Feb 23 and simplifies adding custom extensions.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:117,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"As explained in the \",(0,n.jsxDEV)(e.a,{href:\"https://github.com/llimllib/wasm_sqlite_with_stats\",children:\"wasm_sqlite_with_stats repository\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:119,columnNumber:21},this),\":\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:119,columnNumber:1},this),(0,n.jsxDEV)(e.blockquote,{children:(0,n.jsxDEV)(e.p,{children:\"[it uses a] preprocessor macro called SQLITE_EXTRA_INIT which will, if defined, load extra code into sqlite after finishing up its own initialization. If you point SQLITE_EXTRA_INIT at a function that calls sqlite3_auto_extension with a pointer to your extension's init function, it will load right after sqlite loads itself and the functions defined within will be available to sqlite.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:121,columnNumber:3},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:121,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:\"However, there's no need to tinker with the build steps as shown in the above referenced repository since the new changes have made it much easier to add a custom extension.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:123,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"adding-a-rot13-function\",children:[(0,n.jsxDEV)(e.a,{href:\"#adding-a-rot13-function\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Adding a rot13 function\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:125,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:\"Let's add the official rot13 extension to our build.\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:127,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"We can copy the file from the \",(0,n.jsxDEV)(e.code,{children:\"ext\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:129,columnNumber:31},this),\" directory:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:129,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-bash\",children:(0,n.jsxDEV)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"cp\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"..\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),\"/misc/rot13.c \",(0,n.jsxDEV)(e.span,{className:\"token builtin class-name\",children:\".\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:131,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:131,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"or download it from this \",(0,n.jsxDEV)(e.a,{href:\"https://www.sqlite.org/src/file/ext/misc/rot13.c\",children:\"link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:135,columnNumber:26},this),\".\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:135,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Next, create \",(0,n.jsxDEV)(e.code,{children:\"sqlite3_wasm_extra_init.c\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:137,columnNumber:14},this),\" with the following contents:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:137,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-c\",children:(0,n.jsxDEV)(e.code,{className:\"code-highlight language-c\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`/*\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** If the canonical build process finds the file\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** sqlite3_wasm_extra_init.c in the main wasm build directory, it\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** arranges to include that file in the build of sqlite3.wasm and\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** defines SQLITE_EXTRA_INIT=sqlite3_wasm_extra_init.\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`**\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** The C file must define the function sqlite3_wasm_extra_init() with\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** this signature:\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`**\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`**  int sqlite3_wasm_extra_init(const char *)\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`**\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** and the sqlite3 library will call it with an argument of NULL one\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** time during sqlite3_initialize(). If it returns non-0,\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:(0,n.jsxDEV)(e.span,{className:\"token comment\",children:`** initialization of the library will fail.\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token comment\",children:\"*/\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token macro property\",children:[(0,n.jsxDEV)(e.span,{className:\"token directive-hash\",children:\"#\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:17,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token keyword directive\",children:\"include\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:17,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token string\",children:'\"sqlite3.h\"'},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:17,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:17,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token macro property\",children:[(0,n.jsxDEV)(e.span,{className:\"token directive-hash\",children:\"#\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:18,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token keyword directive\",children:\"include\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:18,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token string\",children:\"<stdio.h>\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:18,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:18,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token macro property\",children:[(0,n.jsxDEV)(e.span,{className:\"token directive-hash\",children:\"#\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:19,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token keyword directive\",children:\"include\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:19,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token string\",children:'\"rot13.c\"'},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:19,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:19,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"int\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"sqlite3_wasm_extra_init\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"const\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"char\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"*\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),\"z\",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"{\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:21,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"int\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:22,columnNumber:1},this),\" nErr \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"=\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:22,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token number\",children:\"0\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:22,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\";\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:22,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"  nErr \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"+=\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),\" \",(0,n.jsxDEV)(e.span,{className:\"token function\",children:\"sqlite3_auto_extension\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"void\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"*\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),\"sqlite3_rot_init\",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\";\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:23,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"return\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:24,columnNumber:1},this),\" nErr \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\"?\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:24,columnNumber:1},this),\" SQLITE_ERROR \",(0,n.jsxDEV)(e.span,{className:\"token operator\",children:\":\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:24,columnNumber:1},this),\" SQLITE_OK\",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\";\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:24,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"}\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:25,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:139,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:139,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"We use the \",(0,n.jsxDEV)(e.a,{href:\"https://www.sqlite.org/c3ref/auto_extension.html\",children:\"sqlite3_auto_extension\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:167,columnNumber:12},this),\" function to register the rot13 extension. Note, SQLite will call the function with an argument of NULL one time during sqlite3_initialize(). If it returns non-0, initialization of the library will fail.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:167,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Re-run \",(0,n.jsxDEV)(e.code,{children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:169,columnNumber:8},this),\" in the \",(0,n.jsxDEV)(e.code,{children:\"ext/wasm\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:169,columnNumber:22},this),\" directory. The new build will include the rot13 extension. However, as pointed out in the \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite.org/forum/info/1e1c04f3ed1bc96b\",children:\"forums\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:169,columnNumber:123},this),\", this is not included in the fiddle and speedtest1 build by default as the fiddle includes \",(0,n.jsxDEV)(e.code,{children:\"shell.c\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:169,columnNumber:271},this),\" which includes a number of built-in extensions that might clash with the custom extension.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:169,columnNumber:1},this),(0,n.jsxDEV)(e.h3,{id:\"building-a-fiddle-with-the-custom-extension\",children:[(0,n.jsxDEV)(e.a,{href:\"#building-a-fiddle-with-the-custom-extension\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Building a fiddle with the custom extension\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:171,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Nonetheless, it might still be convenient to build a fiddle with the custom extension so we can quickly test it out. To do so, we need to edit \",(0,n.jsxDEV)(e.code,{children:\"fiddle.make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:173,columnNumber:144},this),\" by adding the \",(0,n.jsxDEV)(e.code,{children:\"DSQLITE_WASM_EXTRA_INIT\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:173,columnNumber:172},this),\" flag to \",(0,n.jsxDEV)(e.a,{href:\"https://github.com/sqlite/sqlite/blob/version-3.42.0/ext/wasm/fiddle.make#L27-L43\",children:\"fiddle.emcc-flaggs\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:173,columnNumber:206},this),\" i.e. it should look like:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:173,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{children:(0,n.jsxDEV)(e.code,{className:\"code-highlight language-make\",children:[(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`fiddle.emcc-flags = \\\\\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`  ...\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`  -DSQLITE_SHELL_FIDDLE \\\\\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`  -DSQLITE_WASM_EXTRA_INIT\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:0},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:175,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Also edit \",(0,n.jsxDEV)(e.a,{href:\"https://github.com/sqlite/sqlite/blob/version-3.42.0/ext/wasm/fiddle.make#L55\",children:\"fiddle.cses\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:182,columnNumber:11},this),\" to:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:182,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{children:(0,n.jsxDEV)(e.code,{className:\"code-highlight language-make\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:`fiddle.cses := $(dir.top)/shell.c $(sqlite3-wasm.cfiles)\n`},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:0},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:184,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"The code might change in feature releases, but the general idea is that we need to add the \",(0,n.jsxDEV)(e.code,{children:\"DSQLITE_WASM_EXTRA_INIT\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:188,columnNumber:92},this),\" flag and \",(0,n.jsxDEV)(e.code,{children:\"sqlite3_wasm_extra_init.c\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:188,columnNumber:127},this),\" to the fiddle build.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:188,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"Re-run \",(0,n.jsxDEV)(e.code,{children:\"make\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:190,columnNumber:8},this),\" in the \",(0,n.jsxDEV)(e.code,{children:\"ext/wasm\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:190,columnNumber:22},this),\" directory and you should be able to use the rot13 function in the fiddle like so:\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:190,columnNumber:1},this),(0,n.jsxDEV)(e.pre,{className:\"language-sql\",children:(0,n.jsxDEV)(e.code,{className:\"code-highlight language-sql\",children:(0,n.jsxDEV)(e.span,{className:\"code-line\",children:[(0,n.jsxDEV)(e.span,{className:\"token keyword\",children:\"SELECT\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),\" rot13\",(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\"(\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token string\",children:\"'Uryyb Jbeyq'\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\")\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),(0,n.jsxDEV)(e.span,{className:\"token punctuation\",children:\";\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:192,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:192,columnNumber:1},this),(0,n.jsxDEV)(e.div,{children:(0,n.jsxDEV)(p,{alt:\"SQLite WASM Fiddle\",src:\"/static/img/sqlite-wasm-fiddle.png\",width:\"1194\",height:\"577\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:196,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:196,columnNumber:1},this),(0,n.jsxDEV)(e.h2,{id:\"demo\",children:[(0,n.jsxDEV)(e.a,{href:\"#demo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"Demo\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:198,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"As everything is self-contained within the fiddle directory, we can just drag and drop it to Netlify and serve it as a static site. Try it out over \",(0,n.jsxDEV)(e.a,{href:\"https://sqlite-wasm-rot13.netlify.app/\",children:\"here\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:200,columnNumber:149},this),\".\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:200,columnNumber:1},this),(0,n.jsxDEV)(e.h2,{id:\"sqlite-extension-template\",children:[(0,n.jsxDEV)(e.a,{href:\"#sqlite-extension-template\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsxDEV)(e.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this),\"SQLite Extension Template\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:202,columnNumber:1},this),(0,n.jsxDEV)(e.p,{children:[\"11 Aug 2023, Update - I've created a \",(0,n.jsxDEV)(e.a,{href:\"https://github.com/timlrx/sqlite-extension-template\",children:\"SQLite Extension Template\"},void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:204,columnNumber:38},this),\". It expands on what is covered in the post and supports building a C / C++ extension with a loadable module, static extension, WebAssembly distribution with fiddle and a Python package.\"]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:204,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\",lineNumber:1,columnNumber:1},this)}function yn(o={}){let{wrapper:e}=o.components||{};return e?(0,n.jsxDEV)(e,Object.assign({},o,{children:(0,n.jsxDEV)(Ee,o,void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this)}),void 0,!1,{fileName:\"/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx\"},this):Ee(o)}var xn=yn;function Te(o,e,f){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+o+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(f?\"\\nIt\\u2019s referenced in your code at `\"+f+\"` in `/Users/canhnd/Desktop/code/2024/myblog/_mdx_bundler_entry_point-39818abc-6345-4459-8f74-abadd1f38266.mdx`\":\"\"))}return pn(gn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "blog/2023-06-18-sqlite-wasm-with-custom-extensions.mdx",
  "_raw": {
    "sourceFilePath": "blog/2023-06-18-sqlite-wasm-with-custom-extensions.mdx",
    "sourceFileName": "2023-06-18-sqlite-wasm-with-custom-extensions.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/2023-06-18-sqlite-wasm-with-custom-extensions"
  },
  "type": "Blog",
  "readingTime": {
    "text": "6 min read",
    "minutes": 5.75,
    "time": 345000,
    "words": 1150
  },
  "slug": "sqlite-wasm-with-custom-extensions",
  "path": "blog/sqlite-wasm-with-custom-extensions",
  "filePath": "blog/2023-06-18-sqlite-wasm-with-custom-extensions.mdx",
  "toc": [
    {
      "value": "Prerequisites",
      "url": "#prerequisites",
      "depth": 2
    },
    {
      "value": "Install GCC and Cmake",
      "url": "#install-gcc-and-cmake",
      "depth": 3
    },
    {
      "value": "Install Enscripten SDK",
      "url": "#install-enscripten-sdk",
      "depth": 3
    },
    {
      "value": "Install WASM Binary Toolkit (Wabt tools)",
      "url": "#install-wasm-binary-toolkit-wabt-tools",
      "depth": 3
    },
    {
      "value": "Building SQLite WASM",
      "url": "#building-sqlite-wasm",
      "depth": 2
    },
    {
      "value": "Development build",
      "url": "#development-build",
      "depth": 3
    },
    {
      "value": "Production build",
      "url": "#production-build",
      "depth": 3
    },
    {
      "value": "Adding a new extension",
      "url": "#adding-a-new-extension",
      "depth": 2
    },
    {
      "value": "Adding a rot13 function",
      "url": "#adding-a-rot13-function",
      "depth": 3
    },
    {
      "value": "Building a fiddle with the custom extension",
      "url": "#building-a-fiddle-with-the-custom-extension",
      "depth": 3
    },
    {
      "value": "Demo",
      "url": "#demo",
      "depth": 2
    },
    {
      "value": "SQLite Extension Template",
      "url": "#sqlite-extension-template",
      "depth": 2
    }
  ],
  "structuredData": {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "SQLite WASM with Custom Extensions",
    "datePublished": "2023-06-18T00:00:00.000Z",
    "dateModified": "2023-08-11T00:00:00.000Z",
    "description": "A concise guide on building SQLite WASM on Ubuntu Linux with custom extensions. Run SQLite in the browser and enable new possibilities by providing an interface to other C libraries through custom extensions.",
    "image": "/static/img/sqlite-wasm-post-banner.png",
    "url": "https://www.davidnguyen.blog/sqlite-wasm-with-custom-extensions"
  }
}